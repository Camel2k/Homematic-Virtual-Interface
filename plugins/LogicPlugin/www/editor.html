


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <title>
      
        Homematic Virtual Layer Logic Plugin
      
    </title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic" rel="stylesheet">
    
      <link href="../assets/css/toolkit-inverse.css" rel="stylesheet">
    
    
    <link href="../assets/css/application.css" rel="stylesheet">

    <style>
      /* note: this is a hack for ios iframe for bootstrap themes shopify page */
      /* this chunk of css is not part of the toolkit :) */
      body {
        width: 1px;
        min-width: 100%;
        *width: 100%;
      }
    </style>
  </head>


<body>
  <div class="bw">
    <div class="fu">
      <div class="ge aom">
        <nav class="aot">
          <div class="aon">
            <button class="amy amz aoo" type="button" data-toggle="collapse" data-target="#nav-toggleable-sm">
              <span class="ct">Toggle nav</span>
            </button>
            <a class="aop cn" href="index.html">
            </a>
          </div>

          <div class="collapse and" id="nav-toggleable-sm">
            <ul class="nav of nav-stacked">
              <li class="tq">Plugins</li>
              <li>
                <a href="/">Home</a>
              </li>
              <li class="active">
                <a href="index.html">Logic Plugin</a>
              </li>
              <li>
              <a href="?do=reload">Reload Scripts</a>
              </li>
            </ul>
            <hr class="rw aky">
          </div>
        </nav>
      </div>
      <div class="hc aps">
        <div class="apa">
  <div class="apb">
    <h6 class="apd">Homematic Virtual Layer</h6>
    <h2 class="apc">Logic Plugin</h2>
  </div>
</div>

<hr class="aky">
<form action="index.html" id = "editor.form" method="post">
	<input type="hidden" id="do" name="do" value="script.save" />
	<input type="hidden" id = "editor.content" name="editor.content" />
	<input type="hidden" id = "editor.new" name="editor.new"  value="$editor.new$" />
<div class="by">
  <h4 class="ty">
    Editor
  </h4>
  <div class="ty">Filename <input class="dy dh" name="script.filename" value="$editor.file$" /></div>
</div>

<div class="by" style="min-height: 300px;">
<div id="editor" style="min-height: 300px;">$editor.content$</div>
<div id="editor.error" style="min-height: 50px;">$editor.error$</div>
<input type="button" id="save" value="Save"/>
<input type="button" id="validate" value="Validate"/>
</div>
</form>
<h4>Syntax Help</h4>
<div id="help">
<ul>
	<li><b>link(Source,Destination)</b> Create a link between two datapoints.</li>
	<li><b>subscribe(Source, callback)</b> Subscribe to change Event of a datapoint. The callback function will be executed with parameters (source,value).</li>
	<li><b>getValue(Datapoint).then(function (value) {})</b> Will fetch a value for the datapoint an call the function later.(last known Value)</li>
	<li><b>getState(Datapoint).then(function (value) {})</b> Will fetch a value for the datapoint an call the function later. Fetches value direct from the interface.</li>
	<li><b>setValue(Datapoint,newValue)</b> Will set a new Value to the given Datapoint.</li>
	<li><b>getVariables([Name1,Name2,Namen]).then(function (variables) {})</b> Will fetch the values for given variables from CCU and call the function later its done.</li>
	<li><b>executeCCUProgram(program).then(function () {})</b> Will launch the named programm at your ccu</li>
	<li><b>setVariables({"Name1":Value1,"Name2":value2,"NameN":vnalue})</b> Will set new Variable Values</li>
	<li><b>schedule('m h d M Y', {"name":"SchedulerName"}, function () {})</b> Will schedule a function for the given time. Syntax is like unix cron</li>
	<li><b>fetchMessages().then(function (messages) {})</b>will fetch all CCU system messages into the array  messages.</li>
	<li><b>confirmMessages(messages)</b>will confirm all ccu system messages from messages array.</li>
    <li><b>httpCall(method,url,parameters).then(function (result,error){}</b> Will perform a http Call (parameters are {key:value,key2:value2})</li>
</ul>
</div>
	

  </div>
    </div>
  </div>

</div>

    <script src="https://cdn.jsdelivr.net/ace/1.2.6/min/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/bootstrap.min.js" type="text/javascript"></script>

<script>
    var js_editor = ace.edit("editor");
    require("ace/edit_session").EditSession.prototype.$useWorker=false	
    js_editor.setTheme("ace/theme/monokai");
    js_editor.getSession().setMode("ace/mode/javascript");
    
    
    $("#validate").click(function(){
	    var cnt = js_editor.getValue();
	    document.getElementById("do").value = "script.validate";
	    document.getElementById("editor.content").value = cnt;
	    document.getElementById("editor.form").submit();
	});
    
    
    $("#save").click(function(){
	    var cnt = js_editor.getValue();
	    document.getElementById("do").value = "script.save";
	    document.getElementById("editor.content").value = cnt;
	    document.getElementById("editor.form").submit();
    });
    
    $(document).ready(function() {
	    $("#editor").height($(document).height()*0.50);
    });
    
</script>

  </body>
</html>
